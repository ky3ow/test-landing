---
interface NavItem {
	id: string;
	displayName: string;
	link: string;
	children?: NavItem[];
}

interface Props {
	item: NavItem;
}

import NavItemComponent from "./NavItem.astro";

const { item } = Astro.props;
const { displayName, link, children = [] } = item;

const hasChildren = children && children.length > 0;
---

<li class="relative group">
	<a
		href={link}
		class="flex items-center gap-2 px-3 py-2 text-gray-700 hover:text-indigo-500 transition-colors duration-200"
	>
		<span>{displayName}</span>
		{hasChildren && (
			<span class="ml-1 transition-transform duration-200 group-hover:rotate-90 inline-block">
				â–¶
			</span>
		)}
	</a>

	{hasChildren && (
		<ul class="absolute left-0 top-full mt-2 bg-white shadow-lg rounded-lg py-2 min-w-[200px] z-10 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform origin-top-left scale-95 group-hover:scale-100">
			{children.map((child) => (
				<NavItemComponent item={child} />
			))}
		</ul>
	)}
</li>
